# Models/

Plain value types. No networking, no timers, no Combine. All `Codable` structs match the `games.json` schema exactly.

## ChessGame.swift

Codable struct. Fields: `white`, `black`, `whiteElo`, `blackElo`, `tournament`, `year: Int`, `positions: [String]`.

**`positions` indexing** — always exactly 12 FEN strings:
```
positions[0]  = board 1 move before final checkmate  → displayed at hour  1
positions[1]  = board 2 moves before final checkmate → displayed at hour  2
...
positions[11] = board 12 moves before checkmate      → displayed at hour 12
```
`fenIndex = hour - 1` (0-based). Generated by `scripts/build_json.py` — do not hand-edit.

`whiteElo` / `blackElo` are `String`, not `Int`, because historical games have `"?"`. Views handle this.

## BoardPosition.swift

Parses a FEN string into an 8×8 grid of `ChessPiece?`.

**Orientation:**
```
squares[rankIndex][fileIndex]
rankIndex 0 = rank 8 (top of board — black's home rank)
rankIndex 7 = rank 1 (bottom of board — white's home rank)
fileIndex 0 = file a (left), fileIndex 7 = file h (right)
```
This matches FEN rank order directly (FEN lists rank 8 first).

**Invalid FEN** — `init(fen:)` falls back to `startingPositionSquares` (a `static let`) rather than calling `startingPosition` recursively. `parse()` returns `nil` for malformed input — wrong rank count, wrong file count, unknown characters are all handled.

Only the piece-placement field is used (everything after the first space is ignored).

**Types:**
- `PieceType` — `king, queen, rook, bishop, knight, pawn`
- `PieceColor` — `white, black`
- `ChessPiece` — `type + color`, computed `imageName: String` → e.g. `"wK"`, `"bP"`

## ClockState.swift

Plain snapshot struct. Created fresh every second by `ClockService.makeState(at:)`. No methods.

```swift
struct ClockState {
    let hour: Int      // 1–12
    let minute: Int    // 0–59
    let isAM: Bool
    let game: ChessGame
    let fen: String    // = game.positions[hour - 1]
}
```
